# ポケモンタイプ相性クイズアプリの要件定義

## 1. 機能要件

### 1.1 クイズ機能
- ポケモンのタイプ相性に関するクイズを出題する
- 問題形式：「XタイプがYタイプに与えるダメージ倍率」を選択肢から問う
- 選択肢（難易度別）：
  - かんたん・ふつう：4択「こうかばつぐん(2倍)」「ふつう(1倍)」「こうかいまひとつ(0.5倍)」「こうかなし(0倍)」
  - むずかしい：6択「こうかばつぐん(4倍)」「こうかばつぐん(2倍)」「ふつう(1倍)」「こうかいまひとつ(0.5倍)」「こうかいまひとつ(0.25倍)」「こうかなし(0倍)」
- 正解・不正解の判定と結果表示

### 1.2 難易度設定機能
- 3段階の難易度設定：かんたん、ふつう、むずかしい
- かんたん：単一タイプ同士の相性のみ
- ふつう：単一タイプ同士の相性（全タイプ対象）
- むずかしい：複合タイプ（2つのタイプを持つ）への攻撃が対象

### 1.3 問題生成機能
- 18種類のポケモンタイプから攻撃側・防御側をランダムに選択
- 難易度「むずかしい」では複合タイプ（例：ドラゴン・じめん）のみ出題
- 重複のないクイズ問題を生成
- 問題数は設定可能（デフォルト：10問）

### 1.4 スコア管理機能
- 正解数の記録・表示
- 正答率の計算・表示
- クイズ終了時の結果画面表示

## 2. データ要件

### 2.1 ポケモンタイプ
- 18種類のタイプ：ノーマル、ほのお、みず、でんき、くさ、こおり、かくとう、どく、じめん、ひこう、エスパー、むし、いわ、ゴースト、ドラゴン、あく、はがね、フェアリー

### 2.2 タイプ相性データ
- 各タイプ組み合わせ（18×18=324通り）の相性倍率
- 基本相性倍率：2.0（こうかばつぐん）、1.0（ふつう）、0.5（こうかいまひとつ）、0.0（こうかなし）
- 複合タイプでの拡張倍率：4.0（こうかばつぐん×2）、0.25（こうかいまひとつ×2）
- 正しいタイプ相性については`type_table.png`の相性表を参照

### 2.3 複合タイプのパターン
- 複合タイプへの攻撃時は両方のタイプとの相性を計算（倍率の掛け算）
- 例：ドラゴン・じめんタイプに氷技で攻撃 → ドラゴンに氷（2倍）× じめんに氷（2倍）= 4倍

## 3. UI/UX要件

### 3.1 画面構成
- スタート画面：クイズ開始ボタン、難易度選択、問題数設定
- クイズ画面：問題文、タイプアイコン（アニメーション付き）、選択肢ボタン（かんたん・ふつう：4つ、むずかしい：6つ）、進行状況表示、現在の難易度表示、クイズを中断できるボタン
- 結果画面：正解・不正解表示、正解の説明、次の問題ボタン
- 終了画面：最終スコア、難易度別の成績、再挑戦ボタン

### 3.2 ビジュアルデザイン
- 各ポケモンタイプの専用アイコン・シンボルを表示
- 各タイプの専用アイコンについては`type_table.png`の相性表で使用されているものを参考にして生成
- タイプの特徴を表現した色彩設計（ほのお：赤・オレンジ、みず：青、くさ：緑など）
- 魅力的なグラデーションや質感表現

### 3.3 タイプ別アニメーション要件
- **ほのお**：炎がゆらゆらと揺れるアニメーション
- **みず**：水の波紋や流れるような動き
- **でんき**：電気の稲妻や火花が走るエフェクト
- **くさ**：葉っぱが風に揺れる動き
- **こおり**：氷の結晶がキラキラと輝く
- **かくとう**：パンチやキックのモーション
- **どく**：毒の泡がぷくぷくと湧く
- **じめん**：土が舞い上がるような動き
- **ひこう**：羽ばたきや風の流れ
- **エスパー**：サイキックな光の揺らぎ
- **むし**：虫の羽音や飛び回る動き
- **いわ**：岩の欠けらが落ちる
- **ゴースト**：幽霊のように揺らめく
- **ドラゴン**：神秘的なオーラの放射
- **あく**：暗闇から現れるような演出
- **はがね**：金属の光沢の反射
- **フェアリー**：キラキラした妖精の粉
- **ノーマル**：シンプルな脈動

### 3.4 インタラクティブアニメーション要件
#### 3.4.1 選択時の攻撃アニメーション
- ユーザーが選択肢を選択した直後に攻撃アニメーションを実行
- 攻撃側タイプアイコンが防御側タイプアイコンに向かって移動・衝突するアニメーション
- 攻撃の軌道は放物線または直線的な動きで表現
- 衝突時にはインパクトエフェクト（光、衝撃波、爆発など）を表示

#### 3.4.2 アニメーション後のフィードバック
- 攻撃アニメーション完了後に正解・不正解の判定結果を表示
- 正解：〇マーク、成功エフェクト（キラキラ、光など）
- 不正解：×マーク、失敗エフェクト（暗転、エラー音など）
- 判定表示と同時に正解の説明文をフェードイン

#### 3.4.3 アニメーション制御
- 攻撃アニメーション時間：1.5～2秒程度
- 判定結果表示：アニメーション完了の0.3秒後
- 次の問題への遷移：判定表示から3秒後（またはユーザーのクリック）
- アニメーション中は他の操作を無効化

### 3.5 操作性
- ボタンクリックでの選択肢選択
- レスポンシブデザイン（PC・スマートフォン対応）
- 直感的なUI設計
- アニメーション実行中も操作性を損なわない

## 4. 技術要件

### 4.1 プラットフォーム
- Webアプリケーション
- モダンブラウザ対応（Chrome、Firefox、Safari、Edge）

### 4.2 実装技術
- フロントエンド：TypeScript
- フレームワーク：React
- データ形式：JSON
- アニメーション技術：CSS3 Animations/Transitions、JavaScript（requestAnimationFrame）
- アイコン・グラフィック：SVG形式推奨（スケーラブル、軽量）

## 5. 受け入れ基準

### 5.1 基本機能
- [ ] ポケモンタイプ相性の問題が正しく出題される
- [ ] 難易度に応じた選択肢が表示される（かんたん・ふつう：4択、むずかしい：6択）
- [ ] 正解・不正解の判定が正しく動作する
- [ ] スコアが正確に計算・表示される

### 5.2 難易度機能
- [ ] 3段階の難易度選択が可能
- [ ] 「かんたん」では基本的なタイプ相性のみ出題
- [ ] 「ふつう」では全18タイプの相性を出題
- [ ] 「むずかしい」では複合タイプの問題のみ出題

### 5.3 複合タイプ機能
- [ ] 複合タイプへの攻撃倍率が正確に計算される（掛け算）
- [ ] 複合タイプの問題文が分かりやすく表示される
- [ ] 複合タイプの正解説明が適切に表示される

### 5.4 データ整合性
- [ ] 18種類すべてのポケモンタイプが含まれる
- [ ] タイプ相性データが公式設定と一致する
- [ ] 複合タイプの相性計算が正確
- [ ] 問題の重複が発生しない

### 5.5 ビジュアル・アニメーション
- [ ] 各タイプのアイコンが適切に表示される
- [ ] タイプ別のアニメーションが正しく動作する
- [ ] アニメーションがブラウザ間で一貫して動作する
- [ ] アニメーションが過度に重くない（60fps維持）
- [ ] 複合タイプの場合、両方のタイプアニメーションが表示される

### 5.6 インタラクティブアニメーション
- [ ] 選択肢選択時に攻撃アニメーションが正しく実行される
- [ ] 攻撃側アイコンが防御側アイコンに向かって移動する
- [ ] 衝突時のインパクトエフェクトが適切に表示される
- [ ] アニメーション完了後に正解・不正解判定が表示される
- [ ] 判定結果のエフェクト（〇×マーク）が正しく動作する
- [ ] アニメーション中は他の操作が無効化される
- [ ] 指定された時間内にアニメーションが完了する（1.5～2秒）

### 5.7 ユーザビリティ
- [ ] 直感的に操作できるUI
- [ ] レスポンシブデザインが機能する
- [ ] 読み込み時間が3秒以内
- [ ] クイズの進行がスムーズ
- [ ] 難易度選択が分かりやすい
- [ ] アニメーション実行中の適切な操作制御

### 5.8 品質
- [ ] バグのない動作
- [ ] 各ブラウザで正常に動作する
- [ ] エラーハンドリングが適切に実装される
